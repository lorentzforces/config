#!/usr/bin/env bash
set -u

# open a tmux session in one of our well-defined dev dirs

INIT_QUERY=${1:-}

main() {
	local dev_dir
	dev_dir=$(fzf_directories_at "$HOME/mine/repos" "$INIT_QUERY")
	if [[ -z "$dev_dir" ]]; then
		_ltz_print_error "fzf output was empty"
		return 1
	fi

	local dev_name
	dev_name=${ basename "$dev_dir" | sed "s/\./__/g"; }
	dev_name+=" dev"

	_ltz_print_progress "dev name: ${dev_name}"

	tmux-engage-editor-session "$dev_dir" "$dev_name"
}
main
