#!/usr/bin/env bash

set -euo pipefail
IFS=$'\n\t'

# fuzzy-search across all directories at the specified path (like project selection)

BASE_PATH=${1:-}

function main() {
	local containing_dir="$BASE_PATH"
	if [[ -z $containing_dir ]]; then
		containing_dir=$(pwd)
	fi

	local target
	target=$(
		find -L "$containing_dir" -mindepth 1 -maxdepth 1 -type d \
		| fzf-tmux -u20 -- --no-hscroll --ansi --no-multi
	) || return 1

	echo "$target"
}
main
